<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§ç²‰ä¸å°ç²çš„ç”Ÿæ—¥è®¡æ—¶</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 2.5em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            border: 2px solid #a1c4fd;
        }

        section:hover {
            transform: translateY(-5px);
            border-color: #64b5f6;
        }

        h2 {
            color: #1976d2;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8em;
        }

        p {
            line-height: 1.6;
            margin: 15px 0;
            text-align: center;
            font-size: 1.1em;
        }

        #countdown {
            font-size: 2em;
            color: #1976d2;
            font-weight: bold;
            display: block;
            text-align: center;
            margin: 20px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        #wishes p {
            color: #666;
            font-style: italic;
        }

        footer {
            text-align: center;
            color: #fff;
            padding: 20px;
            margin-top: 50px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 2em;
            }
            #countdown {
                font-size: 1.5em;
            }
        }

        /* ç”Ÿæ—¥ç¤¼ç›’å’Œè›‹ç³•çš„æ ·å¼ */
        .birthday-box {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffd6e7;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
        }

        .gift-box {
            width: 200px;
            height: 200px;
            background: #ff69b4;
            position: relative;
            animation: bounce 2s infinite;
        }

        .gift-box::before {
            content: 'ğŸ';
            font-size: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .cake-container {
            text-align: center;
        }

        .cake {
            font-size: 100px;
            margin-bottom: 20px;
            animation: rotate 2s infinite;
        }

        .age {
            font-size: 2em;
            color: #ff1493;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            animation: scale 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes scale {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .sakura {
            position: fixed;
            pointer-events: none;
            z-index: 999;
        }
        
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }

        .trail {
            position: fixed;
            pointer-events: none;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff69b4, #ff1493);
            animation: fade 1s ease-out;
        }
        
        @keyframes fade {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.5); opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- ç”Ÿæ—¥ç¤¼ç›’å’Œè›‹ç³• -->
    <div id="birthday-animation" style="display: none;">
        <div class="birthday-box" onclick="showCake()">
            <div class="gift-box"></div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>å¤§ç²‰ä¸ç‹ç²çš„ç”Ÿæ—¥è®¡æ—¶</h1>
            <div class="music-player">
                <button onclick="toggleMusic()" class="music-btn">ğŸµ</button>
            </div>
        </header>

        <main>
            <section id="birthday">
                <h2>ç”Ÿæ—¥ä¿¡æ¯</h2>
                <div id="birthday-dates">
                    <!-- ç”Ÿæ—¥ä¿¡æ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ’å…¥ -->
                </div>
                <p>è·ç¦»ä¸‹ä¸€æ¬¡ç”Ÿæ—¥è¿˜æœ‰ï¼š</p>
                <span id="countdown">è®¡ç®—ä¸­...</span>
                <div class="birthday-image">
                    <img src="images/birthday.jpg" alt="ç”Ÿæ—¥å¿«ä¹" style="
                        max-width: 80%;
                        height: auto;
                        margin: 30px auto;
                        display: block;
                        border-radius: 15px;
                        box-shadow: 0 8px 16px rgba(0,0,0,0.15);
                        transition: transform 0.3s ease;
                    ">
                </div>
            </section>

            <section>
                <!-- ç”Ÿæ—¥ç¥ç¦éƒ¨åˆ†è¢«ç§»é™¤ -->
            </section>
        </main>

        <footer>
            <p>&copy; 2024 å¤§ç²‰ä¸å°ç²çš„ç”Ÿæ—¥è®¡æ—¶</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@latest/dist/fireworks.js"></script>
    <script>
        // å­˜å‚¨å·²çŸ¥çš„ç”Ÿæ—¥æ—¥æœŸ
        const birthdays = {
            2024: { month: 0, day: 12 },  // 1æœˆ12æ—¥
            2025: { month: 0, day: 1 },   // 1æœˆ1æ—¥
            2026: { month: 0, day: 20 },  // 1æœˆ20æ—¥
            2027: { month: 0, day: 9 },   // 1æœˆ9æ—¥
            2028: { month: 0, day: 29 },  // 1æœˆ29æ—¥
            2029: { month: 0, day: 17 },  // 1æœˆ17æ—¥
            2030: { month: 1, day: 5 },   // 2æœˆ5æ—¥
            2031: { month: 0, day: 25 },  // 1æœˆ25æ—¥
            2032: { month: 1, day: 13 },  // 2æœˆ13æ—¥
            2033: { month: 1, day: 2 },   // 2æœˆ2æ—¥
            2034: { month: 0, day: 22 },  // 1æœˆ22æ—¥
            2035: { month: 1, day: 10 },  // 2æœˆ10æ—¥
            2036: { month: 0, day: 30 },  // 1æœˆ30æ—¥
            2037: { month: 1, day: 18 },  // 2æœˆ18æ—¥
            2038: { month: 1, day: 7 },   // 2æœˆ7æ—¥
            2039: { month: 0, day: 26 },  // 1æœˆ26æ—¥
            2040: { month: 1, day: 15 },  // 2æœˆ15æ—¥
            2041: { month: 1, day: 4 },   // 2æœˆ4æ—¥
            2042: { month: 0, day: 24 },  // 1æœˆ24æ—¥
            2043: { month: 1, day: 12 },  // 2æœˆ12æ—¥
            2044: { month: 1, day: 1 },   // 2æœˆ1æ—¥
            2045: { month: 0, day: 21 },  // 1æœˆ21æ—¥
            2046: { month: 1, day: 9 },   // 2æœˆ9æ—¥
            2047: { month: 0, day: 28 },  // 1æœˆ28æ—¥
            2048: { month: 1, day: 16 },  // 2æœˆ16æ—¥
            2049: { month: 1, day: 5 },   // 2æœˆ5æ—¥
            2050: { month: 0, day: 25 },  // 1æœˆ25æ—¥
            2051: { month: 1, day: 13 },  // 2æœˆ13æ—¥
            2052: { month: 1, day: 2 },   // 2æœˆ2æ—¥
            2053: { month: 0, day: 22 },  // 1æœˆ22æ—¥
            2054: { month: 1, day: 10 },  // 2æœˆ10æ—¥
            2055: { month: 0, day: 30 },  // 1æœˆ30æ—¥
            2056: { month: 1, day: 18 },  // 2æœˆ18æ—¥
            2057: { month: 1, day: 7 },   // 2æœˆ7æ—¥
            2058: { month: 0, day: 26 },  // 1æœˆ26æ—¥
            2059: { month: 1, day: 14 },  // 2æœˆ14æ—¥
            2060: { month: 1, day: 3 },   // 2æœˆ3æ—¥
            2061: { month: 0, day: 23 },  // 1æœˆ23æ—¥
            2062: { month: 1, day: 11 },  // 2æœˆ11æ—¥
            2063: { month: 0, day: 31 },  // 1æœˆ31æ—¥
            2064: { month: 1, day: 19 },  // 2æœˆ19æ—¥
            2065: { month: 1, day: 7 },   // 2æœˆ7æ—¥
            2066: { month: 0, day: 27 },  // 1æœˆ27æ—¥
            2067: { month: 1, day: 15 },  // 2æœˆ15æ—¥
            2068: { month: 1, day: 4 },   // 2æœˆ4æ—¥
            2069: { month: 0, day: 23 },  // 1æœˆ23æ—¥
            2070: { month: 1, day: 12 },  // 2æœˆ12æ—¥
            2071: { month: 1, day: 1 },   // 2æœˆ1æ—¥
            2072: { month: 0, day: 22 },  // 1æœˆ22æ—¥
            2073: { month: 1, day: 9 },   // 2æœˆ9æ—¥
            2074: { month: 0, day: 29 },  // 1æœˆ29æ—¥
            2075: { month: 1, day: 17 },  // 2æœˆ17æ—¥
            2076: { month: 1, day: 6 },   // 2æœˆ6æ—¥
            2077: { month: 0, day: 25 },  // 1æœˆ25æ—¥
            2078: { month: 1, day: 13 },  // 2æœˆ13æ—¥
            2079: { month: 1, day: 3 },   // 2æœˆ3æ—¥
            2080: { month: 0, day: 23 },  // 1æœˆ23æ—¥
            2081: { month: 1, day: 10 },  // 2æœˆ10æ—¥
            2082: { month: 0, day: 30 },  // 1æœˆ30æ—¥
            2083: { month: 1, day: 19 },  // 2æœˆ19æ—¥
            2084: { month: 1, day: 8 },   // 2æœˆ8æ—¥
            2085: { month: 0, day: 27 },  // 1æœˆ27æ—¥
            2086: { month: 1, day: 15 },  // 2æœˆ15æ—¥
            2087: { month: 1, day: 4 },   // 2æœˆ4æ—¥
            2088: { month: 0, day: 24 },  // 1æœˆ24æ—¥
            2089: { month: 1, day: 11 },  // 2æœˆ11æ—¥
            2090: { month: 1, day: 1 },   // 2æœˆ1æ—¥
            2091: { month: 0, day: 21 },  // 1æœˆ21æ—¥
            2092: { month: 1, day: 9 },   // 2æœˆ9æ—¥
            2093: { month: 0, day: 28 },  // 1ï¿½ï¿½28æ—¥
            2094: { month: 1, day: 16 },  // 2æœˆ16æ—¥
            2095: { month: 1, day: 8 },   // 2æœˆ8æ—¥
            2096: { month: 0, day: 28 },  // 1æœˆ28æ—¥
            2097: { month: 1, day: 15 },  // 2æœˆ15æ—¥
            2098: { month: 1, day: 4 },   // 2æœˆ4æ—¥
            2099: { month: 0, day: 24 }   // 1æœˆ24æ—¥
        };

        // æ£€æŸ¥æ˜¯å¦æ˜¯ç”Ÿæ—¥
        function checkBirthday(now) {
            const currentYear = now.getFullYear();
            if (birthdays[currentYear]) {
                const birthday = new Date(currentYear, birthdays[currentYear].month, birthdays[currentYear].day);
                const startTime = new Date(birthday);
                startTime.setHours(0, 0, 0, 0);
                
                const endTime = new Date(birthday);
                endTime.setHours(23, 59, 59, 999);
                
                if (now >= startTime && now <= endTime) {
                    if (!window.animationShown) {
                        const birthdayAnimation = document.getElementById('birthday-animation');
                        birthdayAnimation.style.display = 'block';
                        birthdayAnimation.innerHTML = `
                            <div class="birthday-box" onclick="showCake()">
                                <div class="gift-box"></div>
                            </div>
                        `;
                        window.animationShown = true;
                    }
                    return true;
                }
            }
            return false;
        }

        // è·å–å½“å‰åº”æ˜¾ç¤ºçš„å¹´ä»½
        function getCurrentDisplayYears() {
            const now = new Date();
            const currentYear = now.getFullYear();
            
            // å¦‚æœå½“å‰å¹´ä»½çš„ç”Ÿæ—¥å·²ç»è¿‡äº†ï¼Œæ˜¾ç¤ºä¸‹ä¸€å¹´å’Œä¸‹ä¸‹å¹´
            if (birthdays[currentYear]) {
                const birthday = new Date(currentYear, birthdays[currentYear].month, birthdays[currentYear].day);
                if (now > birthday) {
                    return [currentYear + 1, currentYear + 2];
                }
            }
            
            // å¦åˆ™æ˜¾ç¤ºå½“å‰å¹´å’Œä¸‹ä¸€å¹´
            return [currentYear, currentYear + 1];
        }

        // æ›´æ–°é¡µé¢æ˜¾ç¤ºçš„ç”Ÿæ—¥ä¿¡æ¯
        function updateBirthdayDisplay() {
            const birthdayInfo = document.getElementById('birthday-dates');
            let html = `<p>å°ç²çš„å†œå†ç”Ÿæ—¥æ˜¯2003å¹´åäºŒæœˆåˆäºŒ</p>`;
            
            // è·å–åº”æ˜¾ç¤ºçš„å¹´ä»½
            const years = getCurrentDisplayYears();
            
            years.forEach(year => {
                const date = birthdays[year];
                if (date) {
                    html += `<p>${year}å¹´çš„ç”Ÿæ—¥æ˜¯${date.month + 1}æœˆ${date.day}æ—¥</p>`;
                }
            });
            
            birthdayInfo.innerHTML = html;
        }

        // è®¡ç®—å¹´é¾„
        function calculateAge(birthYear) {
            const now = new Date();
            return now.getFullYear() - birthYear;
        }

        // æ˜¾ç¤ºè›‹ç³•å’Œå¹´é¾„
        function showCake() {
            const birthdayAnimation = document.getElementById('birthday-animation');
            const age = calculateAge(2003);  // 2003æ˜¯å‡ºå¹´ä»½
            
            birthdayAnimation.innerHTML = `
                <div class="birthday-box">
                    <div class="cake-container">
                        <div class="cake">ğŸ‚</div>
                        <div class="age">${age}å²å•¦ï¼</div>
                    </div>
                </div>
            `;
            
            // 5ç§’åéšè—åŠ¨ç”»
            setTimeout(() => {
                birthdayAnimation.style.display = 'none';
                // å®Œå…¨ç§»é™¤åŠ¨ç”»å…ƒç´ 
                birthdayAnimation.innerHTML = '';
            }, 5000);
        }

        function updateCountdown() {
            // ç›´æ¥ä½¿ç”¨æ–°çš„ Date å¯¹è±¡ï¼Œä¸ä½¿ç”¨ç¼“å­˜
            const now = new Date(Date.now());
            
            const currentYear = now.getFullYear();
            let nextBirthday = null;
            let nextYear = currentYear;

            // æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç”Ÿæ—¥
            while (!nextBirthday && nextYear <= currentYear + 1) {
                if (birthdays[nextYear]) {
                    const birthday = new Date(nextYear, birthdays[nextYear].month, birthdays[nextYear].day);
                    if (birthday > now) {
                        nextBirthday = birthday;
                    }
                }
                nextYear++;
            }

            // æ£€æŸ¥æ˜¯å¦æ˜¯ç”Ÿæ—¥å½“å¤©
            const isBirthday = checkBirthday(now);

            if (isBirthday) {
                const age = calculateAge(2003);
                document.getElementById('countdown').innerHTML = 
                    `<div class="birthday-wish" style="
                        color: #ff1493;
                        font-size: 1.5em;
                        animation: rainbow 2s linear infinite;
                        text-shadow: 0 0 10px rgba(255,20,147,0.5);
                    ">
                        âœ¨ å°ç²å¤§ç‹${age}å²ç”Ÿæ—¥å¿«ä¹ å¤©å¤©å¼€å¿ƒ âœ¨
                    </div>`;
                // æ˜¾ç¤ºçƒŸèŠ±æ•ˆæœ
                showFireworks();
                return;
            }

            // å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªç”Ÿæ—¥ï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
            if (!nextBirthday) {
                document.getElementById('countdown').innerHTML = "è¯·æ›´æ–°æœªæ¥çš„ç”Ÿæ—¥æ—¥æœŸ";
                return;
            }

            // è®¡ç®—å€’è®¡æ—¶
            const diff = nextBirthday - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('countdown').innerHTML = 
                `${days}å¤© ${hours}å°æ—¶ ${minutes}åˆ†é’Ÿ ${seconds}ç§’`;
        }

        // åˆ†ç¦»ç”Ÿæ—¥ä¿¡æ¯æ›´æ–°é€»è¾‘ï¼Œä½¿ç”¨è¾ƒä½çš„æ›´æ–°é¢‘ç‡
        setInterval(updateBirthdayDisplay, 1000);

        // åˆå§‹åŒ–
        updateBirthdayDisplay();
        updateCountdown();
        // ä½¿ç”¨ requestAnimationFrame æ¥ä¼˜åŒ–æ€§èƒ½
        function animate() {
            updateCountdown();
            requestAnimationFrame(animate);
        }
        requestAnimationFrame(animate);

        // æ·»åŠ å½©è™¹åŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes rainbow {
                0% { color: #ff1493; }
                25% { color: #ff69b4; }
                50% { color: #ff4500; }
                75% { color: #ff69b4; }
                100% { color: #ff1493; }
            }
        `;
        document.head.appendChild(style);

        // åˆ›å»ºæ¨±èŠ±
        function createSakura() {
            const sakura = document.createElement('div');
            sakura.className = 'sakura';
            sakura.textContent = 'ğŸŒ¸';
            sakura.style.left = Math.random() * 100 + 'vw';
            sakura.style.fontSize = Math.random() * 20 + 10 + 'px';
            sakura.style.animation = `fall ${Math.random() * 3 + 2}s linear`;
            document.body.appendChild(sakura);
            
            setTimeout(() => sakura.remove(), 5000);
        }
        
        // æ¯500msåˆ›å»ºä¸€ä¸ªæ¨±èŠ±
        setInterval(createSakura, 500);

        // ä¿®æ”¹ç‚¹å‡»ç‰¹æ•ˆçš„è„šæœ¬
        let lastX = 0;
        let lastY = 0;
        
        document.addEventListener('mousemove', (e) => {
            // è®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦
            const dx = e.clientX - lastX;
            const dy = e.clientY - lastY;
            const speed = Math.sqrt(dx * dx + dy * dy);
            
            // æ ¹æ®ç§»åŠ¨é€Ÿåº¦åˆ›å»ºä¸åŒæ•°é‡çš„ç²’å­
            const particles = Math.floor(speed / 5) + 1;  // å¢åŠ ç²’å­æ•°é‡
            
            for (let i = 0; i < particles; i++) {
                const trail = document.createElement('div');
                trail.className = 'trail';
                
                // åœ¨é¼ æ ‡è·¯å¾„ä¸Šéšæœºåˆ†å¸ƒç²’å­
                const offset = Math.random() * speed;
                trail.style.left = (e.clientX - dx * (offset / speed)) + 'px';
                trail.style.top = (e.clientY - dy * (offset / speed)) + 'px';
                
                // éšæœºå¤§ï¿½ï¿½ï¿½å’Œé¢œè‰²
                const size = Math.random() * 8 + 3;  // è°ƒæ•´ç²’å­å¤§å°èŒƒå›´
                trail.style.width = size + 'px';
                trail.style.height = size + 'px';
                // éšæœºæ¸å˜è‰²
                const hue = Math.random() * 60 + 330;  // ç²‰è‰²åˆ°ç´«è‰²çš„èŒƒå›´
                trail.style.background = `linear-gradient(135deg, 
                    hsl(${hue}, 100%, 75%), 
                    hsl(${hue}, 100%, 50%)
                )`;
                
                document.body.appendChild(trail);
                setTimeout(() => trail.remove(), 800);  // ç¨å¾®ç¼©çŸ­æŒç»­æ—¶é—´
            }
            
            lastX = e.clientX;
            lastY = e.clientY;
        });
        
        // è§¦æ‘¸è®¾å¤‡æ”¯æŒ
        document.addEventListener('touchmove', (e) => {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            document.dispatchEvent(mouseEvent);
        });
        
        document.addEventListener('touchstart', () => isDrawing = true);
        document.addEventListener('touchend', () => isDrawing = false);

        function showFireworks() {
            // å¦‚æœå·²ç»æœ‰çƒŸèŠ±åœ¨æ”¾ï¼Œå°±ä¸è¦é‡å¤åˆ›å»º
            if (document.querySelector('.fireworks-container')) return;
            
            const container = document.createElement('div');
            container.className = 'fireworks-container';
            container.style.position = 'fixed';
            container.style.top = '0';
            container.style.left = '0';
            container.style.width = '100%';
            container.style.height = '100%';
            container.style.zIndex = '999';
            document.body.appendChild(container);
            
            const fireworks = new Fireworks(container, {
                rocketsPoint: 50,
                hue: { min: 0, max: 360 },
                delay: { min: 10, max: 20 },  // åŠ å¿«çƒŸèŠ±å‘å°„é¢‘ç‡
                speed: 2,
                acceleration: 1.05,
                friction: 0.95
            });
            
            fireworks.start();
            setTimeout(() => {
                fireworks.stop();
                // ç¡®ä¿å®Œå…¨ç§»é™¤
                setTimeout(() => {
                    container.remove();
                }, 100);
            }, 5000);  // 5ç§’ååœæ­¢
        }
    </script>
</body>
</html> 